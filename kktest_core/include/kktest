#ifndef KKTEST_CORE_INCLUDE_KKTEST_
#define KKTEST_CORE_INCLUDE_KKTEST_

#include <kktest_impl/definers.hpp>
#include <kktest_impl/filename.hpp>
#include <kktest_impl/signature.hpp>

#define KKTEST_FILE_NAME_ (kktest::trimFileName(__FILE__))

#define kkTest kktest::TestDefiner(KKTEST_FILE_NAME_, __LINE__)

#define kkGroup kktest::GroupDefiner(KKTEST_FILE_NAME_, __LINE__)

#define kkSetUp kktest::SetUpDefiner(KKTEST_FILE_NAME_, __LINE__)

#define kkTearDown kktest::TearDownDefiner(KKTEST_FILE_NAME_, __LINE__)

#define kkExpect(...) kktest::ExpectDefiner(KKTEST_FILE_NAME_, __LINE__)                           \
                                         (__VA_ARGS__, #__VA_ARGS__ " is false")

#define kkFail(...) kktest::ExpectDefiner(KKTEST_FILE_NAME_, __LINE__)(false, __VA_ARGS__)

#define KKTESTCASE_DEF_AUX_1_(x, y) x##_##y
#define KKTESTCASE_DEF_AUX_2_(x, y) KKTESTCASE_DEF_AUX_1_(x, y)
#define kkTestCase(NAME)                                                                           \
            KKTESTCASE_DEF_AUX_2_(kkTestCaseInstance, NAME)();                                     \
            kktest::TestCaseDefiner KKTESTCASE_DEF_AUX_2_(kkTestCaseDefiner, NAME)                 \
                        (KKTESTCASE_DEF_AUX_2_(kkTestCaseInstance, NAME), kktest::kkTestSignature);\
            void KKTESTCASE_DEF_AUX_2_(kkTestCaseInstance, NAME)()

#endif
